<launch>
    <!--<rosparam command="load" file="$(find hmm_sim)/launch/parameter.yaml"/> -->

    <arg name="framerate"  default='16'/>
    <arg name="classes"      default='[771, 783, 773]'/> <!--both feet, rest, both hand-->
	<arg name="classes_name" default='[first class, rest, second class]' />

    <arg name="modality" 	 default='continuous'/>
    <arg name="trials"       default='[10, 10, 10]'/>
    <arg name="bar_th"   default='[0.9, 0.8, 0.9]'/><!--threshold for classification-->

    <arg name="traversability_mode" default="real"/> <!-- null -->    <!-- real -->
    <arg name="min_distance" default="1"/> <!-- minimum distance afterwhich the probability of the direction is set to zero -->
    <arg name="right_lidar_topic" default="scan_right"/>
    <arg name="left_lidar_topic" default="scan_left"/>

    <node name="static_classifier" pkg='hmm_sim' type='static_classifier.py' output='screen'>
        <param name="f"  value="$(arg framerate)"/>
    </node> 
    
    <node name="traversability" pkg='hmm_sim' type='traversability.py'>
        <param name="f"  value="$(arg framerate)"/>
        <param name="traversability_mode" value="$(arg traversability_mode)"/>
        <param name="min_distance" value="$(arg min_distance)"/>
        <param name="right_lidar_topic" value="$(arg right_lidar_topic)"/>
        <param name="left_lidar_topic" value="$(arg left_lidar_topic)"/>
    </node>

    <node name="hmm" pkg='hmm_sim' type='hmm.py' output='screen'>
        <param name="f"  value="$(arg framerate)"/>
        <param name="classes" value="$(arg classes)"/>
		<param name="classes_name" value="$(arg classes_name)"/>
        <param name="dt" type="double" value="1.0" />
    </node>

    <node name="bar_feedback" pkg='hmm_sim' type='bar_feedback' output='screen'>
        <param name="sub_name" type="string" value="/hmm/neuroprediction"/>
        <rosparam param="modality" subst_value="True">$(arg modality)</rosparam>
		<rosparam param="bar_th" subst_value="True">$(arg bar_th)</rosparam>
		<rosparam param="classes" subst_value="True">$(arg classes)</rosparam>
		<rosparam param="trials" subst_value="True">$(arg trials)</rosparam>
    </node>

    
</launch>